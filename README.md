# メンテログ PWA v3

## できること
`・` iPhone だけで 滞在ログを入力して履歴を確認
`・` 入力タブと履歴タブを切替
`・` 作業内容は 選択 + その他手入力
`・` 作業内容マスターは 区分 掃除 洗濯 その他 で保持
`・` マスターは 追加 削除 上へ 下へ で順序調整
`・` マスターごとに 表示色 と 推奨頻度 日数 を設定
`・` 履歴タブ上部に 次回推奨作業 を表示
`・` 端末内 localStorage 保存のみ
`・` JSON エクスポート インポートで端末移行

## localStorage 互換について
`・` 既存キーは維持
`・` 記録データ key maintelog_rows_v2
`・` マスター key maintelog_tasks_v2
`・` v2 のマスターは 文字列配列だが v3 ではオブジェクト配列へ移行
`・` 移行時 区分は推測せず 一律で その他 に設定
`・` 必要に応じて マスター編集で 区分や頻度を設定

## GitHub Pages 公開手順
`1` GitHub にリポジトリ作成
`2` この一式を リポジトリ直下に配置
`3` GitHub の Settings -> Pages
`4` Build and deployment
`・` Source GitHub Actions ではなく Deploy from a branch を使う場合
`・` Branch main か master
`・` Folder /(root)
`5` Save
`6` 表示された URL を開く

## iPhone ホーム画面追加
`1` Safari で GitHub Pages の URL を開く
`2` 共有ボタン
`3` ホーム画面に追加
`4` 追加後は アイコンから起動

## 更新反映 キャッシュ対策
`・` PWA は古い版が残ることがある
`・` 本プロジェクトは service worker のキャッシュ名に version を付与している
`・` 更新後に表示が変わらない場合は 次を順に実施

`1` いったん Safari で同じ URL を開き 画面を下に引いて再読み込み
`2` 反映しない場合 ホーム画面のアプリを終了して起動し直し
`3` 反映しない場合 iPhone 設定 -> Safari -> 履歴と Web サイトデータを消去
`4` それでも反映しない場合 ホーム画面からアプリ削除 -> Safari から再追加

## データ移行
`1` 旧端末で 入力タブの JSON エクスポート
`2` 生成された json を AirDrop 等で新端末へ
`3` 新端末で 入力タブの JSON インポート

## アイコン差替
`・` 必須ファイル名 icons/icon-192.png icons/icon-512.png
`・` 既定ではプレースホルダとして同名 png を同梱
`・` 差替は 画像編集ツールで同サイズ png を作成して上書き

`・` 作成例
`1` 正方形 512,512 の png を作る
`2` その png を 192,192 へ縮小して別名保存
`3` icons フォルダへ配置してコミット

## 注意
`・` 本アプリは外部送信なし
`・` localStorage はブラウザ削除操作で消えるため 定期的に JSON エクスポート推奨
